//
//  NBShape.swift
//  NBFace
//
//  Created by David Glivar on 3/2/16.
//  Copyright Â© 2016 Wieden+Kennedy. All rights reserved.
//

import Foundation
import UIKit

struct NBShape {
    
    internal typealias Complex = [[String: [Int]]]

    static func createPath(_ shape: NBShape.Complex) -> UIBezierPath {
        let path = UIBezierPath()
        for (i, instruction) in shape.enumerated() {
            if i == 0 {
                for key in instruction {
                    if let inst = instruction[key.0] {
                        let x = CGFloat(inst[0])
                        let y = CGFloat(inst[1])
                        let start = CGPoint(x: x, y: y)
                        path.move(to: start)
                    }
                }
            }
            if let inst = instruction["line"] {
                let target = CGPoint(x: CGFloat(inst[2]), y: CGFloat(inst[3]))
                path.addLine(to: target)
            } else if let inst = instruction["bezier"] {
                let target = CGPoint(x: CGFloat(inst[6]), y: CGFloat(inst[7]))
                let cp1 = CGPoint(x: CGFloat(inst[2]), y: CGFloat(inst[3]))
                let cp2 = CGPoint(x: CGFloat(inst[4]), y: CGFloat(inst[5]))
                path.addCurve(to: target, controlPoint1: cp1, controlPoint2: cp2)
            }
        }
        return path
    }
    
    static func sizeOfShape(_ shape: NBShape.Complex) -> CGSize {
        var width: CGFloat = 0
        var height: CGFloat = 0
        
        for instruction in shape {
            for key in instruction {
                if let inst = instruction[key.0] {
                    let x = CGFloat(inst[0])
                    let y = CGFloat(inst[1])
                    
                    if x > width { width = x }
                    if y > height { height = y }
                }
            }
        }
        
        return CGSize(width: width, height: height)
    }
    
    // MARK: Shapes
    
    struct Back {
        
        static let Close: NBShape.Complex = [
            ["line": [ 28, 17, 13, 3 ]],
            ["bezier": [ 13, 3, 9, 1, 5, 1, 2, 4 ]],
            ["line": [ 2, 4, 0, 6 ]],
            ["bezier": [ 0, 6, -2, 9, -2, 14, 1, 16 ]],
            ["line": [ 1, 16, 16, 30 ]],
            ["line": [ 16, 30, 3, 45 ]],
            ["bezier": [ 3, 45, 1, 48, 1, 53, 4, 55 ]],
            ["line": [ 4, 55, 6, 57 ]],
            ["bezier": [ 6, 57, 9, 60, 14, 59, 16, 56 ]],
            ["line": [ 16, 56, 30, 41 ]],
            ["line": [ 30, 41, 45, 54 ]],
            ["bezier": [ 45, 54, 48, 57, 52, 56, 55, 53 ]],
            ["line": [ 55, 53, 57, 51 ]],
            ["bezier": [ 57, 51, 60, 48, 59, 44, 56, 41 ]],
            ["line": [ 56, 41, 41, 28 ]],
            ["line": [ 41, 28, 54, 13 ]],
            ["bezier": [ 54, 13, 57, 10, 56, 5, 53, 2 ]],
            ["line": [ 53, 2, 51, 0 ]],
            ["bezier": [ 51, 0, 48, -2, 44, -2, 41, 1 ]],
            ["line": [ 41, 1, 28, 17 ]]
        ]
        
        static let Inner: NBShape.Complex = [
            ["bezier": [ 150, 0, 134, -11, 14, 37, 0, 68 ]],
            ["bezier": [ 0, 68, -15, 99, 121, 173, 145, 155 ]],
            ["bezier": [ 145, 155, 168, 137, 166, 11, 150, 0 ]]
        ]
        
        static let Outer: NBShape.Complex = [
            ["bezier": [ 179, 0, 160, -13, 17, 44, 0, 81 ]],
            ["bezier": [ 0, 81, -18, 118, 145, 207, 173, 186 ]],
            ["bezier": [ 173, 186, 202, 164, 198, 13, 179, 0 ]]
        ]
        
        static let Reflection: NBShape.Complex = [
            ["bezier": [ 51, 0, 45, -4, 24, 1, 0, 9 ]],
            ["bezier": [ 0, 9, 5, 18, 12, 25, 19, 32 ]],
            ["bezier": [ 19, 32, 32, 43, 47, 52, 63, 58 ]],
            ["bezier": [ 63, 58, 62, 30, 58, 5, 51, 0 ]]
        ]
    }

    struct Debug {
        
        static let Outline: NBShape.Complex = [
            [ "line": [ 1300, 1323, 753, 1536 ]],
            [ "line": [ 753, 1536, 214, 1300 ]],
            [ "line": [ 214, 1300, 0, 753 ]],
            [ "line": [ 0, 753, 237, 214 ]],
            [ "line": [ 237, 214, 784, 0 ]],
            [ "line": [ 784, 0, 1323, 237 ]],
            [ "line": [ 1323, 237, 1536, 784 ]],
            [ "line": [ 1536, 784, 1300, 1323 ]]
        ]
    }
    
    struct Letter {
        
        static let Inner: NBShape.Complex = [
            ["bezier": [ 299, 141, 298, 97, 286, 62, 263, 38 ]],
            ["bezier": [ 263, 38, 250, 25, 235, 15, 217, 9 ]],
            ["bezier": [ 217, 9, 200, 3, 181, 0, 159, 0 ]],
            ["bezier": [ 159, 0, 138, 1, 118, 3, 100, 9]],
            ["bezier": [ 100, 9, 80, 15, 63, 23, 49, 34 ]],
            ["bezier": [ 49, 34, 33, 47, 21, 62, 12, 79 ]],
            ["bezier": [ 12, 79, 4, 97, -1, 118, 0, 140 ]],
            ["bezier": [ 0, 140, 0, 183, 15, 222, 43, 251 ]],
            ["bezier": [ 43, 251, 57, 266, 73, 277, 92, 285 ]],
            ["bezier": [ 92, 285, 111, 293, 132, 297, 154, 297 ]],
            ["bezier": [ 154, 297, 176, 297, 196, 292, 214, 285 ]],
            ["bezier": [ 214, 285, 232, 277, 248, 265, 261, 251 ]],
            ["bezier": [ 261, 251, 274, 237, 283, 220, 290, 201 ]],
            ["bezier": [ 290, 201, 296, 182, 299, 162, 299, 141 ]]
        ]
        
        static let Outer: NBShape.Complex = [
            ["bezier": [ 347, 163, 346, 113, 332, 72, 305, 43 ]],
            ["bezier": [ 305, 43, 291, 27, 273, 17, 252, 9 ]],
            ["bezier": [ 252, 9, 232, 3, 210, -1, 185, 0 ]],
            ["bezier": [ 185, 0, 160, 0, 137, 3, 116, 9 ]],
            ["bezier": [ 116, 9, 93, 16, 73, 26, 56, 39 ]],
            ["bezier": [ 56, 39, 38, 53, 24, 71, 14, 91 ]],
            ["bezier": [ 14, 91, 4, 112, -1, 136, 0, 161 ]],
            ["bezier": [ 0, 161, 0, 211, 18, 257, 50, 291 ]],
            ["bezier": [ 50, 291, 66, 308, 85, 321, 107, 330 ]],
            ["bezier": [ 107, 330, 129, 339, 153, 344, 179, 344 ]],
            ["bezier": [ 179, 344, 204, 343, 228, 339, 249, 329 ]],
            ["bezier": [ 249, 329, 270, 320, 288, 307, 303, 290 ]],
            ["bezier": [ 303, 290, 318, 274, 329, 254, 336, 232 ]],
            ["bezier": [ 336, 232, 344, 211, 347, 187, 347, 163 ]]
        ]
        
        static let Reflection: NBShape.Complex = [
            ["bezier": [ 131, 38, 118, 25, 103, 15, 85, 9 ]],
            ["bezier": [ 85, 9, 68, 3, 49, 0, 27, 0 ]],
            ["bezier": [ 27, 0, 18, 0, 9, 1, 0, 2 ]],
            ["bezier": [ 0, 2, 19, 80, 84, 140, 167, 154 ]],
            ["bezier": [ 167, 154, 167, 150, 167, 145, 167, 141 ]],
            ["bezier": [ 167, 141, 166, 97, 154, 62, 131, 38 ]]
        ]
    }
    
    struct Name {
        
        static let Inner: NBShape.Complex = [
            ["bezier": [ 570, 158, 570, 108, 546, 69, 501, 42 ]],
            ["bezier": [ 501, 42, 478, 27, 449, 16, 415, 9 ]],
            ["bezier": [ 415, 9, 382, 3, 345, -1, 304, 0 ]],
            ["bezier": [ 304, 0, 264, 0, 226, 3, 191, 9 ]],
            ["bezier": [ 191, 9, 154, 16, 121, 25, 94, 38 ]],
            ["bezier": [ 94, 38, 64, 52, 40, 69, 24, 88 ]],
            ["bezier": [ 24, 88, 8, 109, 0, 131, 0, 156 ]],
            ["bezier": [ 0, 156, 1, 205, 30, 249, 83, 282 ]],
            ["bezier": [ 83, 282, 109, 298, 141, 311, 176, 320 ]],
            ["bezier": [ 176, 320, 213, 329, 253, 333, 294, 333 ]],
            ["bezier": [ 294, 333, 336, 333, 374, 328, 409, 319 ]],
            ["bezier": [ 409, 319, 444, 310, 474, 298, 499, 281 ]],
            ["bezier": [ 499, 281, 523, 265, 541, 246, 553, 225 ]],
            ["bezier": [ 553, 225, 565, 204, 571, 181, 570, 158 ]]
        ]
        
        static let Outer: NBShape.Complex = [
            ["bezier": [ 631, 175, 630, 120, 604, 76, 555, 46 ]],
            ["bezier": [ 555, 46, 529, 30, 496, 18, 459, 10 ]],
            ["bezier": [ 459, 10, 423, 3, 382, -1, 336, 0 ]],
            ["bezier": [ 336, 0, 292, 0, 249, 4, 211, 10 ]],
            ["bezier": [ 211, 10, 170, 18, 133, 28, 103, 42 ]],
            ["bezier": [ 103, 42, 70, 57, 44, 76, 26, 98 ]],
            ["bezier": [ 26, 98, 8, 120, -1, 146, 0, 173 ]],
            ["bezier": [ 0, 173, 1, 227, 33, 276, 91, 312 ]],
            ["bezier": [ 91, 312, 120, 330, 155, 345, 195, 354 ]],
            ["bezier": [ 195, 354, 235, 364, 279, 369, 325, 369 ]],
            ["bezier": [ 325, 369, 371, 369, 414, 363, 453, 354 ]],
            ["bezier": [ 453, 354, 491, 344, 524, 330, 552, 311 ]],
            ["bezier": [ 552, 311, 578, 294, 598, 273, 612, 249 ]],
            ["bezier": [ 612, 249, 625, 226, 632, 201, 631, 175 ]]
        ]
        
        static let Reflection: NBShape.Complex = [
            ["bezier": [ 311, 158, 311, 108, 287, 69, 242, 42 ]],
            ["bezier": [ 242, 42, 219, 27, 190, 16, 156, 9 ]],
            ["bezier": [ 156, 9, 123, 3, 86, -1, 45, 0 ]],
            ["bezier": [ 45, 0, 30, 0, 15, 0, 0, 1 ]],
            ["bezier": [ 0, 1, 7, 49, 36, 93, 85, 126 ]],
            ["bezier": [ 85, 126, 113, 145, 146, 160, 183, 170 ]],
            ["bezier": [ 183, 170, 221, 180, 262, 185, 306, 185 ]],
            ["bezier": [ 306, 185, 307, 185, 308, 185, 309, 185 ]],
            ["bezier": [ 309, 185, 311, 176, 312, 167, 311, 158 ]]
        ]
    }
    
    struct Progess {
        
        static let Outer: NBShape.Complex = [
            [ "bezier": [ 618, 0, 289, -18, 18, 135, 0, 467 ]],
            [ "bezier": [ 0, 467, -19, 799, 190, 1078, 519, 1096 ] ],
            [ "bezier": [ 519, 1096, 849, 1114, 1059, 880, 1078, 548 ] ],
            [ "bezier": [ 1078, 548, 1096, 215, 948, 19, 618, 0 ] ]
        ]
    }
    
    struct ThumbsDown {
        
        static let Inner: NBShape.Complex = [
            ["bezier": [ 299, 141, 298, 97, 286, 62, 263, 38 ]],
            ["bezier": [ 263, 38, 250, 25, 235, 15, 217, 9 ]],
            ["bezier": [ 217, 9, 200, 3, 181, 0, 159, 0 ]],
            ["bezier": [ 159, 0, 138, 1, 118, 3, 100, 9 ]],
            ["bezier": [ 100, 9, 80, 15, 63, 23, 49, 34 ]],
            ["bezier": [ 49, 34, 33, 47, 21, 62, 12, 79 ]],
            ["bezier": [ 12, 79, 4, 97, -1, 118, 0, 140 ]],
            ["bezier": [ 0, 140, 0, 183, 15, 222, 43, 251 ]],
            ["bezier": [ 43, 251, 57, 266, 73, 277, 92, 285 ]],
            ["bezier": [ 92, 285, 111, 293, 132, 297, 154, 297 ]],
            ["bezier": [ 154, 297, 176, 297, 196, 292, 214, 285 ]],
            ["bezier": [ 214, 285, 232, 277, 248, 265, 261, 251 ]],
            ["bezier": [ 261, 251, 274, 237, 283, 220, 290, 201 ]],
            ["bezier": [ 290, 201, 296, 182, 299, 162, 299, 141 ]]
        ]
        
        static let Outer: NBShape.Complex = [
            ["bezier": [ 347, 163, 346, 113, 332, 72, 305, 43 ]],
            ["bezier": [ 305, 43, 291, 27, 273, 17, 252, 9 ]],
            ["bezier": [ 252, 9, 232, 3, 210, -1, 185, 0 ]],
            ["bezier": [ 185, 0, 160, 0, 137, 3, 116, 9 ]],
            ["bezier": [ 116, 9, 93, 16, 73, 26, 56, 39 ]],
            ["bezier": [ 56, 39, 38, 53, 24, 71, 14, 91 ]],
            ["bezier": [ 14, 91, 4, 112, -1, 136, 0, 161 ]],
            ["bezier": [ 0, 161, 0, 211, 18, 257, 50, 291 ]],
            ["bezier": [ 50, 291, 66, 308, 85, 321, 107, 330 ]],
            ["bezier": [ 107, 330, 129, 339, 153, 344, 179, 344 ]],
            ["bezier": [ 179, 344, 204, 343, 228, 339, 249, 329 ]],
            ["bezier": [ 249, 329, 270, 320, 288, 307, 303, 290 ]],
            ["bezier": [ 303, 290, 318, 274, 329, 254, 336, 232 ]],
            ["bezier": [ 336, 232, 344, 211, 347, 187, 347, 163 ]]
        ]
        
        static let Reflection: NBShape.Complex = [
            ["bezier": [ 131, 38, 118, 25, 103, 15, 85, 9 ]],
            ["bezier": [ 85, 9, 68, 3, 49, 0, 27, 0 ]],
            ["bezier": [ 27, 0, 18, 0, 9, 1, 0, 2 ]],
            ["bezier": [ 0, 2, 19, 80, 84, 140, 167, 154 ]],
            ["bezier": [ 167, 154, 167, 150, 167, 145, 167, 141 ]],
            ["bezier": [ 167, 141, 166, 97, 154, 62, 131, 38 ]]
        ]
        
        static let Thumb: NBShape.Complex = [
            ["bezier": [ 53, 139, 53, 120, 53, 113, 54, 109 ]],
            ["bezier": [ 54, 109, 55, 104, 49, 103, 46, 102 ]],
            ["bezier": [ 46, 102, 42, 102, 25, 101, 15, 102 ]],
            ["bezier": [ 15, 102, 5, 104, 0, 95, 0, 86 ]],
            ["bezier": [ 0, 86, -1, 77, -1, 63, 2, 50 ]],
            ["bezier": [ 2, 50, 6, 37, 17, 16, 23, 8 ]],
            ["bezier": [ 23, 8, 29, 1, 48, 0, 65, 0 ]],
            ["bezier": [ 65, 0, 76, 1, 86, 8, 97, 8 ]],
            ["bezier": [ 97, 8, 102, 8, 113, 9, 113, 9 ]],
            ["bezier": [ 113, 9, 122, 9, 129, 17, 129, 26 ]],
            ["line": [ 129, 26, 129, 86 ]],
            ["bezier": [ 129, 86, 129, 90, 129, 94, 126, 96 ]],
            ["bezier": [ 126, 96, 121, 100, 113, 99, 106, 104 ]],
            ["bezier": [ 106, 104, 101, 107, 94, 116, 92, 121 ]],
            ["bezier": [ 92, 121, 90, 125, 85, 132, 83, 136 ]],
            ["bezier": [ 83, 136, 79, 145, 77, 155, 77, 159 ]],
            ["bezier": [ 77, 159, 76, 162, 76, 168, 68, 168 ]],
            ["bezier": [ 68, 168, 59, 168, 52, 164, 53, 139 ]]
        ]
    }
    
    struct ThumbsUp {
        
        static let Inner: NBShape.Complex = [
            ["bezier": [ 513, 241, 512, 165, 491, 106, 451, 64 ]],
            ["bezier": [ 451, 64, 430, 42, 403, 26, 373, 15 ]],
            ["bezier": [ 373, 15, 344, 5, 310, 0, 274, 0 ]],
            ["bezier": [ 274, 0, 237, 1, 203, 6, 172, 15 ]],
            ["bezier": [ 172, 15, 138, 25, 109, 40, 84, 59 ]],
            ["bezier": [ 84, 59, 57, 80, 36, 105, 22, 135 ]],
            ["bezier": [ 22, 135, 7, 166, 0, 201, 0, 239 ]],
            ["bezier": [ 0, 239, 1, 312, 27, 380, 74, 430 ]],
            ["bezier": [ 74, 430, 98, 455, 127, 475, 159, 488 ]],
            ["bezier": [ 159, 488, 191, 502, 227, 509, 264, 508 ]],
            ["bezier": [ 264, 508, 302, 508, 337, 501, 368, 487 ]],
            ["bezier": [ 368, 487, 399, 474, 426, 454, 448, 429 ]],
            ["bezier": [ 448, 429, 470, 405, 486, 376, 497, 343 ]],
            ["bezier": [ 497, 343, 508, 312, 513, 277, 513, 241 ]]
        ]
        
        static let Outer: NBShape.Complex = [
            ["bezier": [ 581, 272, 579, 189, 556, 121, 511, 72 ]],
            ["bezier": [ 511, 72, 487, 46, 457, 28, 422, 16 ]],
            ["bezier": [ 422, 16, 389, 5, 351, -1, 310, 0 ]],
            ["bezier": [ 310, 0, 269, 0, 230, 6, 194, 16 ]],
            ["bezier": [ 194, 16, 157, 27, 123, 44, 95, 66 ]],
            ["bezier": [ 95, 66, 65, 89, 41, 119, 25, 152 ]],
            ["bezier": [ 25, 152, 8, 188, 0, 227, 0, 270 ]],
            ["bezier": [ 0, 270, 1, 353, 31, 430, 84, 486 ]],
            ["bezier": [ 84, 486, 111, 515, 143, 537, 180, 552 ]],
            ["bezier": [ 180, 552, 217, 568, 257, 575, 300, 575 ]],
            ["bezier": [ 300, 575, 342, 575, 381, 567, 417, 551 ]],
            ["bezier": [ 417, 551, 452, 536, 482, 514, 508, 485 ]],
            ["bezier": [ 508, 485, 532, 458, 551, 425, 563, 388 ]],
            ["bezier": [ 563, 388, 575, 352, 582, 313, 581, 272 ]]
        ]
        
        static let Reflection: NBShape.Complex = [
            ["bezier": [ 225, 64, 204, 42, 177, 26, 147, 15 ]],
            ["bezier": [ 147, 15, 118, 5, 84, 0, 48, 0 ]],
            ["bezier": [ 48, 0, 31, 1, 16, 2, 0, 4 ]],
            ["bezier": [ 0, 4, 33, 136, 145, 239, 286, 264 ]],
            ["bezier": [ 286, 264, 287, 257, 287, 249, 287, 241 ]],
            ["bezier": [ 287, 241, 286, 165, 265, 106, 225, 64 ]]
        ]
        
        static let Thumb: NBShape.Complex = [
            ["bezier": [ 122, 0, 105, 0, 106, 11, 105, 18 ]],
            ["bezier": [ 105, 18, 103, 26, 100, 45, 91, 64 ]],
            ["bezier": [ 91, 64, 88, 71, 79, 84, 74, 94 ]],
            ["bezier": [ 74, 94, 69, 104, 55, 122, 45, 128 ]],
            ["bezier": [ 45, 128, 31, 137, 17, 134, 6, 143 ]],
            ["bezier": [ 6, 143, 1, 148, 0, 156, 0, 163 ]],
            ["line": [ 0, 163, 0, 283 ]],
            ["bezier": [ 0, 283, 0, 301, 14, 316, 31, 316 ]],
            ["bezier": [ 31, 316, 31, 316, 54, 317, 65, 318 ]],
            ["bezier": [ 65, 318, 86, 319, 105, 333, 128, 333 ]],
            ["bezier": [ 128, 333, 162, 334, 200, 332, 211, 317 ]],
            ["bezier": [ 211, 317, 223, 302, 245, 261, 253, 235 ]],
            ["bezier": [ 253, 235, 260, 208, 259, 180, 258, 163 ]],
            ["bezier": [ 258, 163, 257, 146, 246, 128, 226, 130 ]],
            ["bezier": [ 226, 130, 207, 133, 173, 131, 166, 130 ]],
            ["bezier": [ 166, 130, 159, 129, 148, 127, 149, 117 ]],
            ["bezier": [ 149, 117, 151, 109, 152, 96, 152, 58 ]],
            ["bezier": [ 152, 58, 153, 8, 140, 0, 122, 0 ]]
        ]
    }
}
